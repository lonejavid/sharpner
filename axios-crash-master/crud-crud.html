<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Contact Information</title>
</head>
<body>
  <h2>Contact Information</h2>
  <form id="form-data">
    <label for="name">Name:</label><br>
    <input type="text" id="name" name="name"><br><br>

    <label for="email">Email:</label><br>
    <input type="email" id="email" name="email"><br><br>

    <label for="phone">Phone:</label><br>
    <input type="tel" id="phone" name="phone"><br><br>

    <input type="submit" value="Submit">
  </form>
  <input type="button" id="fetch" value="fetch data">
  <form>
    <ul id="item-list1"><ul></ul></form>
  </form>
  

    <h3> Patients</h3>
  <ul id="item-list">


  </ul>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
  <script >
  document.getElementById('form-data').addEventListener('submit',onsubmit);

    let Uname=document.getElementById('name')
    let email1=document.getElementById('email')
    let phone=document.getElementById('phone')
    let user_list=document.getElementById('item-list');
    let user_list1=document.getElementById('item-list1');
    
    let fetch=document.getElementById('fetch');
    function onsubmit(e){
        
        e.preventDefault();
    
        let name=Uname.value
        let email=email1.value
        let number=phone.value
        const data={
            name,
            email,
            number
        }
        axios.post("https://crudcrud.com/api/d8be962e21d54f1ea18d7dbdaa22bd12/patients",data)
        .then((response)=>console.log(response)).
        catch((error)=>console.log(error));
        let result=name+'  '+email+'  '+number;
        
    
        let li=document.createElement('li');
        li.innerHTML=result;
        user_list1.append(li);
    }
    //
    window.addEventListener("DOMContentLoaded",()=>{
        axios.get("https://crudcrud.com/api/d8be962e21d54f1ea18d7dbdaa22bd12/patients")
       .then((response)=>{
        
        for(let i=0;i<response.data.length;i++)
        {
            let patient=response.data[i]
            let res1=`${patient.name} - ${patient.email} - ${patient.number}`;
            let btn=document.createElement('button')
            btn.innerHTML="delete";
            btn.id="btn";
            btn.onclick = function () {
             deletePatient(patient._id); // Pass the patient ID to the delete function
                    };

        let li=document.createElement('li');
        
        li.innerHTML=res1;
        li.append(btn);
        user_list.append(li);
            
        }
       })
      })
    //   function deletePatient(patientId) {
    //     axios.delete('https://crudcrud.com/api/b41cf59d1bc64a26a51cc7d0287db996/patients/?_id=patientId')
    //         .then((response) => {
    //             console.log(`Patient ${patientId} deleted`);
    //             console.log(patientId);
                 
    //          })
    //         .catch((error) => console.log(error));
            
    // }
    function deletePatient(patientId) {
    // axios.delete(`https://crudcrud.com/api/b41cf59d1bc64a26a51cc7d0287db996/patients/${patientId}`)
    //     .then((response) => {
    //         console.log(`Patient ${patientId} deleted`);
    //     })
    //     .catch((error) => console.log('Error deleting patient:', error));
   // console.log(`Patient ${patientId} deleted`);
}
    </script>
</body>
</html>
